# kas include file with generic settings for a yocto-based poky image using
# the opkg package management system.
---
header:
  version: 17

env:
  # Export these variables (if set) to bitbake via BB_ENV_PASSTHROUGH_ADDITIONS
  # This allows us to put build cache directories into a separate path
  CCACHE_TOP_DIR: null
  DL_DIR: null
  SSTATE_DIR: null
  TMPDIR: null

distro: poky

# Default if MACHINE is not defined anywhere else (becomes "MACHINE ?? =")
machine: qemux86-64

target:
  - core-image-minimal

local_conf_header:
  base: |
    CONF_VERSION = "2"

    # Use opkg (ipk packages) instead of rpm
    PACKAGE_CLASSES ??= "package_ipk"

    # Monitor disk usage and stop before filling the disk completely
    BB_DISKMON_DIRS ??= "\
        STOPTASKS,${TMPDIR},1G,100K \
        STOPTASKS,${DL_DIR},1G,100K \
        STOPTASKS,${SSTATE_DIR},1G,100K \
        STOPTASKS,/tmp,100M,100K \
        HALT,${TMPDIR},100M,1K \
        HALT,${DL_DIR},100M,1K \
        HALT,${SSTATE_DIR},100M,1K \
        HALT,/tmp,10M,1K"

# Generic upstream layers
repos:
  meta-cloud-services:
    url: git://git.yoctoproject.org/meta-cloud-services.git
    branch: kirkstone
    path: sources/meta-cloud-services
    layers:
      # "." refers to sources/meta-cloud-services
      .:
      meta-openstack:

  meta-openembedded:
    url: git://git.openembedded.org/meta-openembedded.git
    branch: kirkstone
    path: sources/meta-openembedded
    layers:
      meta-filesystems:
      meta-networking:
      meta-oe:
      meta-python:
      meta-webserver:

  meta-virtualization:
    url: git://git.yoctoproject.org/meta-virtualization.git
    branch: kirkstone
    path: sources/meta-virtualization

  poky:
    url: http://git.yoctoproject.org/poky
    branch: kirkstone
    path: sources/poky
    layers:
      meta:
      meta-poky:
      meta-yocto-bsp:
