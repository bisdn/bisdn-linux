BISDN Linux
4.7.0 Release Notes
Date: 2022-08-05

!! Due to the internal changes downgrading to releases before 4.7.0 is not
   supported! If you need to downgrade, uninstall BISDN Linux completely
   (e.g. via [1]) before installing an older release.

! New in this release
- Yocto: Updated Yocto from 3.1 (dunfell) to 4.0 (kirkstone).
  This includes major version updates for most OS components. For a detailed
  list of changes, see [2] and the release notes for 3.2 to 3.4.
- Linux kernel: Updated to 5.15.56.

! Changed behavior
- MAC addresses of port* interfaces are now set based on EEPROM contents instead
  of randomly generated.
- The default OF-DPA L2/L3 allocation mode is now balanced, increasing the
  amount of possible L2 and L3 entries on Trident 3 based platforms.

! Bug fixes
- mstpd: Fixed an issue causing missed netlink events like link state changes
  of ports, resulting in a desync between mstpd state and actual/kernel state.
- The installer will now rename default sudoers configuration files in a way
  that they do not override any changes by the user anymore.

[1] https://docs.bisdn.de/tools/onie-tools.html#onie-bisdn-uninstall
[2] https://docs.yoctoproject.org/migration-guides/release-notes-4.0.html

! Detailed Changelog

Changes between v4.6.1 and v4.7.0:

bisdn-onie-additions:
backup: make sure /etc/gshadow is taken over as well
backup: make sure default sudoers backup files are ignored
installer: setup ONLP at install time

build-bisdn-linux:
default.xml: switch Yocto to kirkstone
local.conf.sample: BB_DISKMON_DIRS: rename "ABORT" to "HALT"
local.conf.sample: bump configration version
local.conf: drop image-prelink as it was removed
conf: drop image-mklibs as support for it was removed
extra: drop meta-tibit
reorder the flow of the CVE notes a bit
add NOTE about failed builds related to CVE-2022-24765

meta-ofdpa:
ofdpa: switch l2l3 mode to balanced by default
ofdpa: point to correct revision and branch
ofdpa: split rc.soc into user and system files
ofdpa: as5835-54x: sort ports by user (not logical) port
ofdpa: cli: allow setting knet netif MAC addresses
ofdpa: populate port MAC addresses from ONL
Revert "ofdpa: explicitly link against libonlp-platform"
ofdpa: accton-as4610: switch L7 OS to ubuntu
openbcm-gpl-modules: fix license name
convert layer to kirkstone

meta-open-network-linux:
linux-yocto-onl: update to 5.15.56
linux-yocto-onl: update to 5.15.54
linux-yocto-onl: update to 5.15.52
linux-yocto-onl: update to 5.15.48
linux-yocto-onl: update to 5.15.46
linux-yocto-onl: allow setting mac address on tap interface creation
platform-as4610: do not setup /etc/onl/platform anymore
onl: replace libonlp-platform symlink with default libonlp-platform
onl: do not provide /etc/onl/platform anymore
onl: build all platforms
onl: fixup comments about installed libraries
linux-yocto-onl: import linux-yocto dependencies
linux-yocto-onl/x86-intel: disable I2C HID support
linux-yocto-onl/armel-iproc: reenable strong stackprotector
linux-yocto-onl: enable KCONF_BSP_AUDIT
linux-yocto-onl: drop old ONL config option
linux-yocto-onl: update kernel config for 5.15
linux-yocto-onl: update kernel config for 5.14
linux-yocto-onl: update kernel config for 5.13
linux-yocto-onl: update kernel config for 5.12
linux-yocto-onl: update kernel config for 5.11
linux-yocto-onl: update kernel config for 5.10
linux-yocto-onl: update kernel config for 5.9:
linux-yocto-onl: update kernel config for 5.8
linux-yocto-onl: update kernel config for 5.7
linux-yocto-onl: update kernel config for 5.6
linux-yocto-onl: update kernel config for 5.5
linux-yocto-onl: update kernel config for 5.4
linux-yocto-onl: update kernel config for 5.3
linux-yocto-onl: update kernel config for 5.2
linux-yocto-onl: update kernel config for 5.1
linux-yocto-onl: update kernel config for 5.0
linux-yocto-onl: update kernel config for 4.20
linux-yocto-onl: update kernel config for 4.19
linux-yocto-onl: update kernel config for 4.18
linux-yocto-onl: update kernel config for 4.17
linux-yocto-onl: update kernel config for 4.16
linux/yocto-onl: update kernel config for 4.15
onl: delta-ag5648: fix build with GCC 10
onl: cel-questone-2a: fix compilation with GCC 10+
onl: update python3 conversion to work with python 3.10
onl: fix build with PyYAML 6.0
onl: fix compilation with GCC 10
make-mod-scrips: drop obsolete append
linux-yocto-onl: drop local definitions of functions
linux-yocto-onl: drop our virtualization include
strace: drop local version
conf: update tune includes to new location
update layer to kirkstone
onl: ship onlpd instead of onlpdump
kernel: update source comments in linux-yocto-onl_5.15.bb
conf: drop BISDN_ONIE_PLATFORM now that it is autogenerated
onl: move ONL_DEBIAN_SUITE into recipe
conf: drop now unused ONL_ARCH
onl: calculate ONL_BUILD_ARCH dynamically
conf/machine: drop ONL_PLATFORM_SUBDIR
onl.inc: drop unused PLATFORM_PATH
onl: use the onl package manager for resolving paths
onl: update python3 conversion patch
conf: fixup override usage
linux-yocto-onl: do not set CONFIG_IP_NF_FILTER
linux-yocto-onl: do not set CONFIG_NET_UDP_TUNNEL
linux-yocto-onl: x86-intel: do not set CONFIG_CGROUP_HUGETLB
linux-yocto-onl: x86-intel: do not set CONFIG_VXLAN
linux-yocto-onl: use kernel-meta for ext4
linux-yocto-onl: armel-iproc: use ext4 module for ext2 and ext3
linux-yocto-onl: armel-iproc: enable FS_SECURITY for ext4
linux-yocto-onl: armel-iproc: enable ACL support ext4
onl: make use of yocto's python3-native
yocto-linux-onl: armel-iproc: do not disable VXLAN

meta-switch:
systemd: let any interface satisfy systemd-networkd-wait-online
bump distro to version 3.7.0
baseboxd: bump to 1.12.0
mstpd: update to 0.1.0+bisdn3
baseboxd: update to 1.11.10
systemd-conf: restore old match for en* eth* for DHCP
python3-arrow: drop dependency for removed package
python3-requests: add dependency to charset-normalizer
python3-ovs: add dependency to sortedcontainers
python3-eventlet: drop extra depends
python3-tinyrpc: drop in favour of upstream version
python3-oslo.config: drop in favour of upstream version
python3-jsonext: drop in favour of upstream version
python3-ryu: add support for newer eventlet versions
python3-ryu: switch to setuptools3_legacy
rust: work around llvm assuming armv7 means neon is available
abseil-cpp: don't force neon for arm
grpc: update our modifictions to the version in kirkstone
systemd: update to version in kirkstone
keepalived: update our modifications to version in kirkstone
linux-libc-headers: drop local copy in favour of upstream
iproute2: drop local version in favour of upstream
update layer to kirkstone
baseboxd: Bump version to 1.11.9
baseboxd: Bump version to 1.11.8
fixup override usage
libyang2: explicitly enable pkg-config
libyang2: update to 2.0.194
libyang1: drop obsolete package
ryu: fix syntax error in ofctl_v1_3.py
baseboxd-tools: include tunnel table when collecting debug info
rofl-common: update to 0.13.5
baseboxd: Bump version to 1.11.6
basebox-user: fix password generation
onie-nos-installer: calculate BISDN_ONIE_PLATFORM
base-files: backup /etc/gshadow as well
basebox-user: use pre-computed password hash
python3-ryu: set branch explicitly to master
libyang2: set branch explicitly to master
rofl-ofdpa: set branch explicitly to master
rofl-common: set branch explicitly to master
baseboxd: set branch explicitly to master
